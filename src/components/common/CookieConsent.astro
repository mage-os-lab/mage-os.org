---
/**
 * CookieYes Cookie Consent Banner
 *
 * This component loads the CookieYes consent management platform
 * which handles GDPR/CCPA cookie consent for analytics and marketing cookies.
 *
 * CookieYes automatically:
 * - Displays a cookie consent banner to visitors
 * - Blocks analytics/marketing scripts until consent is given
 * - Provides cookie preference management
 * - Maintains consent records for compliance
 *
 * Performance: Script is deferred until browser idle time to avoid
 * impacting Core Web Vitals (LCP, FID, CLS).
 */

const COOKIEYES_CLIENT_ID = '63ec00be2b8265396d841b99';
---

<script is:inline define:vars={{ COOKIEYES_CLIENT_ID }}>
  (function () {
    function loadCookieYes() {
      if (document.getElementById('cookieyes')) return;

      const script = document.createElement('script');
      script.id = 'cookieyes';
      script.type = 'text/javascript';
      script.src = `https://cdn-cookieyes.com/client_data/${COOKIEYES_CLIENT_ID}/script.js`;
      script.async = true;
      document.head.appendChild(script);
    }

    // Load during browser idle time, with fallback for unsupported browsers
    if ('requestIdleCallback' in window) {
      requestIdleCallback(loadCookieYes, { timeout: 2000 });
    } else {
      setTimeout(loadCookieYes, 1000);
    }
  })();
</script>
