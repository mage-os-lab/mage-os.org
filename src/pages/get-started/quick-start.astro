---
import Layout from '~/layouts/PageLayout.astro';
import PageHero from '~/components/widgets/PageHero.astro';

const metadata = {
  title: 'Quick Start Guide',
  description: 'Launch your first Mage-OS store in under 30 minutes with this step-by-step guide.',
  openGraph: {
    images: [{ url: '/og/page/quick-start.png', width: 1200, height: 630 }],
  },
};
---

<Layout metadata={metadata}>
  <PageHero tagline="Get Started" variant="default">
    <Fragment slot="title">Quick Start Guide</Fragment>
    <Fragment slot="subtitle">
      Get from <strong>zero to a working Mage-OS store</strong> in under 30 minutes. This guide is designed for developers,
      merchants evaluating the platform, or anyone wanting a fast local development environment.
    </Fragment>
  </PageHero>

  <section class="px-4 py-16 sm:px-6 mx-auto lg:px-8 max-w-4xl">
    <div
      class="prose prose-lg max-w-none dark:prose-invert dark:prose-headings:text-slate-300 prose-headings:font-heading prose-headings:leading-tighter prose-headings:tracking-tighter prose-headings:font-bold prose-a:text-indigo-600 dark:prose-a:text-indigo-400 prose-code:bg-gray-100 dark:prose-code:bg-gray-800 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-pre:bg-gray-900"
    >
      <p class="text-xl text-muted not-prose mb-8">
        <strong>Total time:</strong> 20-30 minutes | <strong>Difficulty:</strong> Beginner-friendly
      </p>

      <hr class="my-8" />

      <h2>Before You Begin</h2>

      <h3>System Requirements</h3>

      <table>
        <thead>
          <tr>
            <th>Component</th>
            <th>Version Required</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>PHP</td>
            <td>8.3 or 8.4</td>
          </tr>
          <tr>
            <td>Composer</td>
            <td>2.8+</td>
          </tr>
          <tr>
            <td>MySQL</td>
            <td>8.4+ (or MariaDB 11.4+)</td>
          </tr>
          <tr>
            <td>OpenSearch</td>
            <td>2.19+</td>
          </tr>
          <tr>
            <td>Web Server</td>
            <td>Apache 2.4+ or Nginx 1.26+</td>
          </tr>
        </tbody>
      </table>

      <p>
        Need the full list? See <a href="/get-started/system-requirements">System Requirements</a>.
      </p>

      <h3>Choose Your Environment</h3>

      <p>
        <strong>Already have a development environment?</strong> Skip to <a href="#step-1-create-project">Step 1</a>.
      </p>

      <p><strong>Need an environment?</strong> We recommend these Docker-based options:</p>

      <table>
        <thead>
          <tr>
            <th>Tool</th>
            <th>Best For</th>
            <th>Setup Time</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="https://ddev.com/">DDEV</a></td>
            <td>Easiest setup, great for beginners</td>
            <td>5 minutes</td>
          </tr>
          <tr>
            <td><a href="https://github.com/markshust/docker-magento">docker-magento</a></td>
            <td>Production-like, excellent docs</td>
            <td>10 minutes</td>
          </tr>
          <tr>
            <td><a href="https://warden.dev/">Warden</a></td>
            <td>Production-like, built for managing multiple environments</td>
            <td>10 minutes</td>
          </tr>
        </tbody>
      </table>

      <p>
        For detailed Docker installation, see the <a href="/get-started/installation#docker-installation"
          >Installation Guide</a
        >.
      </p>

      <hr class="my-8" />

      <h2 id="step-1-create-project">Step 1: Create Project</h2>

      <p><strong>Time:</strong> 3-5 minutes</p>

      <p>Navigate to your web server's document root and create a new project:</p>

      <pre><code>composer create-project --repository-url=https://repo.mage-os.org/ mage-os/project-community-edition .</code></pre>

      <p><strong>What this does:</strong></p>

      <ul>
        <li>Downloads Mage-OS Distribution and all dependencies</li>
        <li>Sets up the basic file structure</li>
        <li>Configures Composer autoloading</li>
      </ul>

      <hr class="my-8" />

      <h2>Step 2: Create Database</h2>

      <p><strong>Time:</strong> 1 minute</p>

      <p>Create an empty database for your Mage-OS installation:</p>

      <pre><code>{`mysql -u root -p -e "CREATE DATABASE mage_os;"
mysql -u root -p -e "CREATE USER 'mage_os_user'@'localhost' IDENTIFIED BY 'secure_password';"
mysql -u root -p -e "GRANT ALL PRIVILEGES ON mage_os.* TO 'mage_os_user'@'localhost';"
mysql -u root -p -e "FLUSH PRIVILEGES;"`}</code></pre>

      <blockquote>
        <strong>Security note:</strong> Replace <code>secure_password</code> with a strong, unique password for production
        environments.
      </blockquote>

      <hr class="my-8" />

      <h2>Step 3: Run Installation</h2>

      <p><strong>Time:</strong> 5-10 minutes</p>

      <p>Run the setup installer with your configuration:</p>

      <pre><code>{`bin/magento setup:install \\
  --base-url=http://yourdomain.local/ \\
  --db-host=localhost \\
  --db-name=mage_os \\
  --db-user=mage_os_user \\
  --db-password=secure_password \\
  --admin-firstname=Admin \\
  --admin-lastname=User \\
  --admin-email=admin@example.com \\
  --admin-user=admin \\
  --admin-password=Admin123! \\
  --language=en_US \\
  --currency=USD \\
  --timezone=America/New_York \\
  --use-rewrites=1 \\
  --search-engine=opensearch \\
  --opensearch-host=localhost \\
  --opensearch-port=9200`}</code></pre>

      <p><strong>Customize these values:</strong></p>

      <table>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>--base-url</code></td>
            <td>Your store URL</td>
            <td><code>http://mystore.local/</code></td>
          </tr>
          <tr>
            <td><code>--db-name</code></td>
            <td>Database name</td>
            <td><code>mage_os</code></td>
          </tr>
          <tr>
            <td><code>--db-user</code></td>
            <td>Database username</td>
            <td><code>mage_os_user</code></td>
          </tr>
          <tr>
            <td><code>--db-password</code></td>
            <td>Database password</td>
            <td>Your secure password</td>
          </tr>
          <tr>
            <td><code>--admin-email</code></td>
            <td>Admin email address</td>
            <td><code>you@example.com</code></td>
          </tr>
          <tr>
            <td><code>--admin-user</code></td>
            <td>Admin login username</td>
            <td><code>admin</code></td>
          </tr>
          <tr>
            <td><code>--admin-password</code></td>
            <td>Admin login password</td>
            <td>Min 7 chars, 1 letter, 1 number</td>
          </tr>
        </tbody>
      </table>

      <hr class="my-8" />

      <h2>Step 4: Set Permissions and Deploy</h2>

      <p><strong>Time:</strong> 5-10 minutes</p>

      <p>After installation completes, set permissions and deploy assets:</p>

      <pre><code>{`# Set file permissions
find var generated vendor pub/static pub/media app/etc -type f -exec chmod g+w {} +
find var generated vendor pub/static pub/media app/etc -type d -exec chmod g+ws {} +
chmod u+x bin/magento

# Compile dependency injection
bin/magento setup:di:compile

# Deploy static content
bin/magento setup:static-content:deploy -f

# Flush cache
bin/magento cache:flush`}</code></pre>

      <hr class="my-8" />

      <h2>Step 5: Set Deploy Mode</h2>

      <p><strong>For local development:</strong></p>

      <pre><code>bin/magento deploy:mode:set developer</code></pre>

      <p>Developer mode provides detailed error messages and disables static file caching for easier debugging.</p>

      <p><strong>For production:</strong></p>

      <pre><code>bin/magento deploy:mode:set production</code></pre>

      <p>Production mode enables full caching and optimizations for performance.</p>

      <hr class="my-8" />

      <h2>Step 6: Access Your Store</h2>

      <h3>Storefront</h3>

      <p>Open your browser and navigate to:</p>

      <pre><code>http://yourdomain.local/</code></pre>

      <p>You should see the default Mage-OS/Magento storefront with the Luma theme.</p>

      <h3>Admin Panel</h3>

      <p>Navigate to:</p>

      <pre><code>http://yourdomain.local/admin</code></pre>

      <p><strong>Login with:</strong></p>

      <ul>
        <li>
          <strong>Username:</strong>
          <code>admin</code> (or your custom value)
        </li>
        <li>
          <strong>Password:</strong>
          <code>Admin123!</code> (or your custom value)
        </li>
      </ul>

      <hr class="my-8" />

      <h2>Success! Your Store is Live</h2>

      <p>Congratulations! You now have a working Mage-OS installation. Here is what to do next:</p>

      <h3>Essential Configuration</h3>

      <p>Access <strong>Admin &gt; Stores &gt; Configuration</strong> to configure:</p>

      <table>
        <thead>
          <tr>
            <th>Setting</th>
            <th>Location</th>
            <th>Purpose</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Store Information</td>
            <td>General &gt; General</td>
            <td>Store name, address, contact</td>
          </tr>
          <tr>
            <td>Base URLs</td>
            <td>General &gt; Web</td>
            <td>Secure URLs for production</td>
          </tr>
          <tr>
            <td>Payment Methods</td>
            <td>Sales &gt; Payment Methods</td>
            <td>Enable payment gateways</td>
          </tr>
          <tr>
            <td>Shipping Methods</td>
            <td>Sales &gt; Shipping Methods</td>
            <td>Configure shipping options</td>
          </tr>
          <tr>
            <td>Tax Rules</td>
            <td>Sales &gt; Tax</td>
            <td>Set up tax calculations</td>
          </tr>
        </tbody>
      </table>

      <h3>Set Up Cron Jobs</h3>

      <p>
        Mage-OS requires cron for scheduled tasks (indexing, emails, etc.). Use the built-in command to configure cron
        automatically:
      </p>

      <pre><code>bin/magento cron:install</code></pre>

      <p>Verify the installation:</p>

      <pre><code>bin/magento cron:status</code></pre>

      <hr class="my-8" />

      <h2>Troubleshooting</h2>

      <h3>Blank Page After Installation</h3>

      <p><strong>Cause:</strong> Usually a cache or compilation issue.</p>

      <pre><code>{`rm -rf var/cache/* var/page_cache/* generated/*
bin/magento setup:upgrade
bin/magento cache:flush`}</code></pre>

      <h3>404 Errors on Storefront Pages</h3>

      <p><strong>Cause:</strong> Apache mod_rewrite not enabled.</p>

      <pre><code>{`sudo a2enmod rewrite
sudo systemctl restart apache2`}</code></pre>

      <p>
        For Nginx, ensure your configuration includes the rewrite rules. See the <a
          href="/get-started/installation#nginx-configuration">Installation Guide</a
        >.
      </p>

      <h3>Composer Memory Limit Errors</h3>

      <p><strong>Cause:</strong> PHP memory limit too low for Composer.</p>

      <pre><code>php -d memory_limit=1G /usr/local/bin/composer create-project ...</code></pre>

      <h3>OpenSearch Connection Failed</h3>

      <p><strong>Cause:</strong> OpenSearch service not running.</p>

      <p>Verify OpenSearch is running:</p>

      <pre><code>curl http://localhost:9200</code></pre>

      <p>You should see a JSON response with cluster information. If not, start OpenSearch:</p>

      <pre><code>sudo systemctl start opensearch</code></pre>

      <h3>Admin Login Not Working</h3>

      <p><strong>Cause:</strong> Two-factor authentication is enabled by default.</p>

      <p>
        Install the <a href="https://github.com/markshust/magento2-module-disabletwofactorauth"
          >DisableTwoFactorAuth module</a
        > which automatically disables 2FA in developer mode while keeping it enabled in production:
      </p>

      <pre><code>{`composer require --dev markshust/magento2-module-disabletwofactorauth
bin/magento module:enable MarkShust_DisableTwoFactorAuth
bin/magento setup:upgrade`}</code></pre>

      <h3>Static Content Not Loading (CSS/JS Missing)</h3>

      <p><strong>Cause:</strong> Static content not deployed or permissions issue.</p>

      <pre><code>{`bin/magento setup:static-content:deploy -f
bin/magento cache:clean`}</code></pre>

      <hr class="my-8" />

      <h2>Next Steps</h2>

      <p>Now that your store is running, explore these resources:</p>

      <table>
        <thead>
          <tr>
            <th>Resource</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="/get-started/installation">Full Installation Guide</a></td>
            <td>Detailed installation for custom environments</td>
          </tr>
          <tr>
            <td><a href="/get-started/migration-guide">Migration Guide</a></td>
            <td>Migrating from Magento Open Source</td>
          </tr>
          <tr>
            <td><a href="/get-started/system-requirements">System Requirements</a></td>
            <td>Detailed technical specifications</td>
          </tr>
          <tr>
            <td><a href="https://devdocs.mage-os.org">Developer Documentation</a></td>
            <td>Full developer documentation</td>
          </tr>
        </tbody>
      </table>

      <h3>Join the Community</h3>

      <ul>
        <li>
          <strong>Discord:</strong> Get real-time help from the community
        </li>
        <li>
          <strong>GitHub:</strong> Report issues and contribute code
        </li>
        <li>
          <strong>Forums:</strong> Discuss best practices and solutions
        </li>
      </ul>

      <p>
        Visit <a href="/community">mage-os.org/community</a> to get connected.
      </p>
    </div>
  </section>
</Layout>
